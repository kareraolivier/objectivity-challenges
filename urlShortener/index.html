<html>

<head>
    <title>URL shortener</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body class="p-4">
    <div class="m-4">
        <h1 class="m-4"> Objectivity shorten Url</h1>

        <div class="input-group mb-4 m-4">
            <input type="text" class="form-control" id="url" placeholder="Recipient's username"
                aria-label="Recipient's username" aria-describedby="basic-addon2">
            <button class="input-group-text" id="basic-addon2" onclick="shorten()">Create small Url</button>

        </div>
        <div id="short" class="h5 m-4"></div>
    </div>
</body>
<script>
    function shorten() {
        var input = document.getElementById('url');
        var url = input.value;
        $.ajax({
            url: '/r',
            method: 'POST',
            contentType: 'text/plain',
            data: url
        }).done(function (data) {
            var short = document.getElementById('short');
            var url = window.location.origin + '/r/' + data.code;
            short.innerHTML = '<a href="' + url + '">' + url + '</a>';
        });

    }
</script>

</html>